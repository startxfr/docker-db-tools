app:
  build: ./
  container_name: "startx-db-tools"
  links:
    - db-mysql:dbm
    - db-couchbase:dbc
  environment:
   - MYSQL_DATABASE=demo,demo2
   - MYSQL_ADMIN=root:rootPassword
   - MYSQL_USERS=demo:pwd,user3:pwd3,test
   - COUCHBASE_ADMIN=demo:password
   - COUCHBASE_BUCKET=demo,demo2
  volumes:
    - "./mounts/couchbase:/data/couchbase:z"
    - "./mounts/mysql:/data/mysql:z"
    - "./tools.sh:/bin/startx_dbtools:z"
  command: ["init"]

db-mysql:
  image: mariadb:5.5
  container_name: "startx-db-tools_mysql"
  environment:
   - MYSQL_ROOT_PASSWORD=rootPassword
   
db-couchbase:
  image: couchbase:enterprise-5.0.1
  container_name: "startx-db-tools_couchbase"
  ports:
    - 8091-8094:8091-8094
    - 11210:11210

pma:
  image: phpmyadmin/phpmyadmin
  container_name: "startx-db-tools_pma"
  links:
    - db-mysql:db
  environment:
   - PMA_HOST=db
   - PMA_USER=root
   - PMA_PASSWORD=root
   - PMA_VERBOSE=true
   - PMA_PORT=3306
   - PMA_ABSOLUTE_URI=http://localhost:1901
  ports:
    - "1901:80"