app:
  build: ./
  container_name: "startx-db-tools"
  links:
    - db-mysql:dbm
    - db-couchbase:dbc
  environment:
   - MYSQL_DATABASE=startx_dev
   - MYSQL_DATABASE_USER=startx_dev
   - MYSQL_DATABASE_PASSWORD=startx_dev
   - COUCHBASE_USER=startx_dev
   - COUCHBASE_PASSWORD=startx_dev
   - COUCHBASE_BUCKET=startx_dev
  volumes:
    - "./mounts/couchbase-dump:/data/couchbase-dump:Z"
    - "./mounts/mysql-dump:/data/mysql-dump:Z"
    - "./tools.sh:/bin/sxv4_api_tools:Z"
  command: ["init"]

db-mysql:
  image: mariadb:5.5
  container_name: "startx-db-tools_mysql"
  environment:
   - MYSQL_ROOT_PASSWORD=root
   
db-couchbase:
  image: couchbase:enterprise-5.0.1
  container_name: "startx-db-tools_couchbase"
  ports:
    - 8091-8094:8091-8094
    - 11210:11210

pma:
  image: phpmyadmin/phpmyadmin
  container_name: "startx-db-tools_pma"
  links:
    - db-mysql:db
  environment:
   - PMA_HOST=db
   - PMA_USER=root
   - PMA_PASSWORD=root
   - PMA_VERBOSE=true
   - PMA_PORT=3306
   - PMA_ABSOLUTE_URI=http://localhost:1901
  ports:
    - "1901:80"